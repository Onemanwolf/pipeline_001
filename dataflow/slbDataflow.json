{
	"name": "slbDataflow",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"dataset": {
						"referenceName": "slbDataset",
						"type": "DatasetReference"
					},
					"name": "source1"
				}
			],
			"sinks": [
				{
					"dataset": {
						"referenceName": "CosmosDbSqlApiCollection1",
						"type": "DatasetReference"
					},
					"name": "sink1"
				}
			],
			"transformations": [
				{
					"name": "Aggregate1"
				},
				{
					"name": "Filter1"
				},
				{
					"name": "Select1"
				}
			],
			"script": "source(output(\n\t\t{@odata.context} as string,\n\t\tid as string,\n\t\tversion as string,\n\t\ttype as string,\n\t\tmodalities as string[],\n\t\tlastModifiedDateTime as string,\n\t\tstartDateTime as string,\n\t\tendDateTime as string,\n\t\tjoinWebUrl as string,\n\t\torganizer as (acsUser as string, spoolUser as string, phone as (id as string, displayName as string, tenantId as string), guest as string, encrypted as string, onPremises as string, acsApplicationInstance as string, spoolApplicationInstance as string, applicationInstance as string, application as string, device as string, user as (id as string, displayName as string, tenantId as string)),\n\t\tparticipants as (acsUser as string, spoolUser as string, phone as string, guest as string, encrypted as string, onPremises as string, acsApplicationInstance as string, spoolApplicationInstance as string, applicationInstance as string, application as string, device as string, user as (id as string, displayName as string, tenantId as string))[],\n\t\t{sessions@odata.context} as string,\n\t\tsessions as (id as string, modalities as string[], startDateTime as string, endDateTime as string, failureInfo as string, caller as ({@odata.type} as string, feedback as string, userAgent as ({@odata.type} as string, headerValue as string, applicationVersion as string, platform as string, productFamily as string), identity as (acsUser as string, spoolUser as string, phone as string, guest as string, encrypted as string, onPremises as string, acsApplicationInstance as string, spoolApplicationInstance as string, applicationInstance as string, application as string, device as string, user as (id as string, displayName as string, tenantId as string))), callee as ({@odata.type} as string, userAgent as ({@odata.type} as string, headerValue as string, applicationVersion as string, platform as string, productFamily as string)), {segments@odata.context} as string, segments as (id as string, startDateTime as string, endDateTime as string, failureInfo as string, caller as ({@odata.type} as string, feedback as string, userAgent as ({@odata.type} as string, headerValue as string, applicationVersion as string, platform as string, productFamily as string), identity as (acsUser as string, spoolUser as string, phone as string, guest as string, encrypted as string, onPremises as string, acsApplicationInstance as string, spoolApplicationInstance as string, applicationInstance as string, application as string, device as string, user as (id as string, displayName as string, tenantId as string))), callee as ({@odata.type} as string, userAgent as ({@odata.type} as string, headerValue as string, applicationVersion as string, platform as string, productFamily as string)), media as (label as string, callerNetwork as (ipAddress as string, subnet as string, linkSpeed as string, connectionType as string, port as string, reflexiveIPAddress as string, relayIPAddress as string, relayPort as string, macAddress as string, wifiMicrosoftDriver as string, wifiMicrosoftDriverVersion as string, wifiVendorDriver as string, wifiVendorDriverVersion as string, wifiChannel as string, wifiBand as string, basicServiceSetIdentifier as string, wifiRadioType as string, wifiSignalStrength as string, wifiBatteryCharge as string, dnsSuffix as string, sentQualityEventRatio as string, receivedQualityEventRatio as string, delayEventRatio as string, bandwidthLowEventRatio as string), calleeNetwork as (ipAddress as string, subnet as string, linkSpeed as string, connectionType as string, port as string, reflexiveIPAddress as string, relayIPAddress as string, relayPort as string, macAddress as string, wifiMicrosoftDriver as string, wifiMicrosoftDriverVersion as string, wifiVendorDriver as string, wifiVendorDriverVersion as string, wifiChannel as string, wifiBand as string, basicServiceSetIdentifier as string, wifiRadioType as string, wifiSignalStrength as string, wifiBatteryCharge as string, dnsSuffix as string, sentQualityEventRatio as string, receivedQualityEventRatio as string, delayEventRatio as string, bandwidthLowEventRatio as string), callerDevice as (captureDeviceName as string, captureDeviceDriver as string, renderDeviceName as string, renderDeviceDriver as string, sentSignalLevel as string, receivedSignalLevel as string, sentNoiseLevel as string, receivedNoiseLevel as string, initialSignalLevelRootMeanSquare as string, cpuInsufficentEventRatio as string, renderNotFunctioningEventRatio as string, captureNotFunctioningEventRatio as string, deviceGlitchEventRatio as string, lowSpeechToNoiseEventRatio as string, lowSpeechLevelEventRatio as string, deviceClippingEventRatio as string, howlingEventCount as string, renderZeroVolumeEventRatio as string, renderMuteEventRatio as string, micGlitchRate as string, speakerGlitchRate as string), calleeDevice as (captureDeviceName as string, captureDeviceDriver as string, renderDeviceName as string, renderDeviceDriver as string, sentSignalLevel as string, receivedSignalLevel as string, sentNoiseLevel as string, receivedNoiseLevel as string, initialSignalLevelRootMeanSquare as string, cpuInsufficentEventRatio as string, renderNotFunctioningEventRatio as string, captureNotFunctioningEventRatio as string, deviceGlitchEventRatio as string, lowSpeechToNoiseEventRatio as string, lowSpeechLevelEventRatio as string, deviceClippingEventRatio as string, howlingEventCount as string, renderZeroVolumeEventRatio as string, renderMuteEventRatio as string, micGlitchRate as string, speakerGlitchRate as string), streams as (streamId as string, startDateTime as string, endDateTime as string, streamDirection as string, averageAudioDegradation as string, averageJitter as string, maxJitter as string, averagePacketLossRate as string, maxPacketLossRate as string, averageRatioOfConcealedSamples as string, maxRatioOfConcealedSamples as string, averageRoundTripTime as string, maxRoundTripTime as string, packetUtilization as string, averageBandwidthEstimate as string, wasMediaBypassed as string, postForwardErrorCorrectionPacketLossRate as string, averageVideoFrameLossPercentage as string, averageReceivedFrameRate as string, lowFrameRateRatio as string, averageVideoPacketLossRate as string, averageVideoFrameRate as string, lowVideoProcessingCapabilityRatio as string, averageAudioNetworkJitter as string, maxAudioNetworkJitter as string)[])[])[])[]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'arrayOfDocuments',\n\twildcardPaths:['call-data/*.json']) ~> source1\nFilter1 aggregate(groupBy(id,\n\t\tparticipants),\n\tparticipantsCount = sum(size(participants))) ~> Aggregate1\nSelect1 filter(!isNull(sessions.failureInfo)) ~> Filter1\nsource1 select(mapColumn(\n\t\tid,\n\t\tversion,\n\t\ttype,\n\t\tmodalities,\n\t\tlastModifiedDateTime,\n\t\tstartDateTime,\n\t\tendDateTime,\n\t\tjoinWebUrl,\n\t\torganizer,\n\t\tparticipants,\n\t\t{sessions@odata.context},\n\t\tsessions\n\t),\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true) ~> Select1\nAggregate1 sink(allowSchemaDrift: true,\n\tvalidateSchema: false,\n\tdeletable:false,\n\tinsertable:true,\n\tupdateable:false,\n\tupsertable:false,\n\tformat: 'document',\n\tpartitionKey: ['/id'],\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true) ~> sink1"
		}
	}
}